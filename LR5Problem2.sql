DROP TABLE IF EXISTS RENTAL_AGREEMENT;
DROP TABLE IF EXISTS VACATION_PROPERTY;
DROP TABLE IF EXISTS CONDO_LOCATION;
DROP TABLE IF EXISTS RENTER;

CREATE TABLE RENTER (
    RENTER_NUM CHAR(5) PRIMARY KEY,
    FIRST_NAME CHAR(25) NOT NULL,
    MIDDLE_INITIAL CHAR(1),
    LAST_NAME CHAR(25) NOT NULL,
    ADDRESS CHAR(50),
    CITY CHAR(25),
    STATE CHAR(2),
    POSTAL_CODE CHAR(10),
    TELEPHONE CHAR(15),
    EMAIL_ADDRESS CHAR(50)
);

CREATE TABLE CONDO_LOCATION (
    LOCATION_NUM DECIMAL(2,0) PRIMARY KEY,
    LOCATION_NAME CHAR(35) NOT NULL,
    ADDRESS CHAR(50),
    CITY CHAR(25),
    STATE CHAR(2),
    POSTAL_CODE CHAR(10)
);

CREATE TABLE VACATION_PROPERTY (
    PROPERTY_ID DECIMAL(4,0) PRIMARY KEY,
    LOCATION_NUM DECIMAL(2,0) NOT NULL,
    UNIT_NUM CHAR(5) NOT NULL,
    SQR_FT DECIMAL(5,0),
    BEDROOMS DECIMAL(2,0),
    BATHROOMS DECIMAL(2,0),
    MAX_OCCUPANCY DECIMAL(2,0),
    BASE_WEEKLY_RATE DECIMAL(8,2),
    FOREIGN KEY (LOCATION_NUM) REFERENCES CONDO_LOCATION(LOCATION_NUM)
);

CREATE TABLE RENTAL_AGREEMENT (
    RENTAL_ID DECIMAL(6,0) PRIMARY KEY,
    PROPERTY_ID DECIMAL(4,0) NOT NULL,
    RENTER_NUM CHAR(5) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    WEEKLY_RENTAL_AMOUNT DECIMAL(8,2) NOT NULL,
    FOREIGN KEY (PROPERTY_ID) REFERENCES VACATION_PROPERTY(PROPERTY_ID),
    FOREIGN KEY (RENTER_NUM) REFERENCES RENTER(RENTER_NUM)
);


INSERT INTO CONDO_LOCATION VALUES
(1, 'Solmaris Ocean Resort', '1114, 5 Mayon St, Quezon City, 1114 Metro Manila', 'Quezon', 'Metro Manila', '1114');

INSERT INTO CONDO_LOCATION VALUES
(2, 'Solmaris Bayside Village', 'Camarin Rd, Caloocan, 1400 Metro Manila', 'Caloocan', 'Metro Manila', '1400');

INSERT INTO CONDO_LOCATION VALUES
(3, 'Solmaris Beachfront Towers', 'V. Delos Reyes St, Outlook Dr S, Baguio, 2600 Benguet', 'Baguio', 'Northern Luzon', '2600');

INSERT INTO VACATION_PROPERTY VALUES
(101, 1, '1024A', 875, 2, 1, 4, 1200.00);

INSERT INTO VACATION_PROPERTY VALUES
(102, 1, '1205B', 1150, 2, 2, 6, 1450.00);

INSERT INTO VACATION_PROPERTY VALUES
(103, 1, '1310C', 1575, 3, 2, 8, 1850.00);

INSERT INTO VACATION_PROPERTY VALUES
(201, 2, '1506G', 925, 1, 1, 2, 950.00);

INSERT INTO VACATION_PROPERTY VALUES
(202, 2, '2207K', 1284, 2, 2, 6, 1350.00);

INSERT INTO VACATION_PROPERTY VALUES
(301, 3, '2401T', 1650, 3, 3, 8, 2100.00);


INSERT INTO RENTER VALUES
('R0001', 'Maria', 'M', 'Salazar', '123 Main St', 'Atlanta', 'GA', '30309', '404-555-0101', 'salazarm@gmail.com');

INSERT INTO RENTER VALUES
('R0002', 'Alberto', 'D', 'Igno', '456 Oak Ave', 'Birmingham', 'AL', '35203', '205-555-0202', 'alberto123@gmail.com');

INSERT INTO RENTER VALUES
('R0003', 'Michael', NULL, 'Bacani', '789 Pine St', 'Nashville', 'TN', '37201', '615-555-0303', 'topgbacani@gmail.com');

INSERT INTO RENTER VALUES
('R0004', 'Faith', 'R', 'Torres', '321 Elm Dr', 'Charleston', 'SC', '29401', '843-555-0404', 'faithtorres@gmail.com');

INSERT INTO RENTER VALUES
('R0005', 'Emmanuel', 'H', 'Docabo', '654 Maple Ln', 'Savannah', 'GA', '31401', '912-555-0505', 'ehdocabo@mymapua.edu.ph');


INSERT INTO RENTAL_AGREEMENT VALUES
(100001, 101, 'R0001', '2024-06-15', '2024-06-29', 1200.00);

INSERT INTO RENTAL_AGREEMENT VALUES
(100002, 102, 'R0002', '2024-07-01', '2024-07-15', 1450.00);

INSERT INTO RENTAL_AGREEMENT VALUES
(100003, 103, 'R0003', '2024-07-08', '2024-07-29', 1850.00);

INSERT INTO RENTAL_AGREEMENT VALUES
(100004, 201, 'R0004', '2024-08-05', '2024-08-12', 950.00);

INSERT INTO RENTAL_AGREEMENT VALUES
(100005, 301, 'R0005', '2024-08-10', '2024-09-07', 2100.00);



SELECT RENTER_NUM, FIRST_NAME, MIDDLE_INITIAL, LAST_NAME, 
       ADDRESS, CITY, STATE, POSTAL_CODE, TELEPHONE, EMAIL_ADDRESS
FROM RENTER
ORDER BY LAST_NAME, FIRST_NAME;


SELECT vp.PROPERTY_ID, cl.LOCATION_NAME, cl.ADDRESS as LOCATION_ADDRESS,
       cl.CITY, cl.STATE, cl.POSTAL_CODE, vp.UNIT_NUM, vp.SQR_FT,
       vp.BEDROOMS, vp.BATHROOMS, vp.MAX_OCCUPANCY, vp.BASE_WEEKLY_RATE
FROM VACATION_PROPERTY vp
JOIN CONDO_LOCATION cl ON vp.LOCATION_NUM = cl.LOCATION_NUM
ORDER BY cl.LOCATION_NAME, vp.UNIT_NUM;


SELECT ra.RENTAL_ID, r.RENTER_NUM, r.FIRST_NAME, r.MIDDLE_INITIAL, r.LAST_NAME,
       r.ADDRESS, r.CITY, r.STATE, r.POSTAL_CODE, r.TELEPHONE,
       ra.START_DATE, ra.END_DATE, ra.WEEKLY_RENTAL_AMOUNT,
       cl.LOCATION_NAME, vp.UNIT_NUM
FROM RENTAL_AGREEMENT ra
JOIN RENTER r ON ra.RENTER_NUM = r.RENTER_NUM
JOIN VACATION_PROPERTY vp ON ra.PROPERTY_ID = vp.PROPERTY_ID
JOIN CONDO_LOCATION cl ON vp.LOCATION_NUM = cl.LOCATION_NUM
ORDER BY ra.START_DATE DESC;